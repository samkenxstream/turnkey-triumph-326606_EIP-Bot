{"version":3,"file":"assert_is_approved_by_authors.js","sourceRoot":"","sources":["../../../../src/modules/assertions/assert_is_approved_by_authors.ts"],"names":[],"mappings":";;;AACA,6CAA8C;AAC9C,2CAA2C;AAEpC,MAAM,yBAAyB,GAAG,KAAK,EAAE,QAAkB,EAAE,EAAE;IACpE,MAAM,SAAS,GAAG,MAAM,IAAA,wBAAY,GAAE,CAAC;IACvC,MAAM,OAAO,GAAG,IAAA,2BAAc,EAAC,QAAQ,CAAC,CAAC;IAEzC,iDAAiD;IACjD,MAAM,iBAAiB,GAAG,CAAC,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,QAAQ,EAAE,EAAE,CACtD,OAAO,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAC3B,CAAC;IAEF,IAAI,CAAC,iBAAiB,EAAE;QACtB,OAAO;YACL,GAAG,QAAQ,CAAC,IAAI,CAAC,IAAI,gCAAgC;YACrD,IAAI,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG;SAC1B,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;KACb;;QAAM,OAAO;AAChB,CAAC,CAAC;AAfW,QAAA,yBAAyB,6BAepC","sourcesContent":["import { FileDiff } from \"src/domain\";\nimport { requireAuthors } from \"#/assertions\";\nimport { getApprovals } from \"#/approvals\";\n\nexport const assertIsApprovedByAuthors = async (fileDiff: FileDiff) => {\n  const approvals = await getApprovals();\n  const authors = requireAuthors(fileDiff);\n\n  // there exists an approver who is also an author\n  const hasAuthorApproval = !!approvals.find((approver) =>\n    authors.includes(approver)\n  );\n\n  if (!hasAuthorApproval) {\n    return [\n      `${fileDiff.head.name} requires approval from one of`,\n      `(${authors.join(\", \")})`\n    ].join(\" \");\n  } else return;\n};\n"]}